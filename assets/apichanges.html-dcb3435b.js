import{_ as c,M as i,p as h,q as u,R as t,N as d,U as l,t as e,a1 as a}from"./framework-ea2a9e6e.js";const p={},b=t("h1",{id:"api变更说明",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#api变更说明","aria-hidden":"true"},"#"),e(" API变更说明")],-1),m=t("p",null,"更新日期：2022.11.1",-1),_={class:"custom-container details"},g=t("summary",null,"本页内容",-1),y={class:"table-of-contents"},P=a('<h2 id="api变更日志" tabindex="-1"><a class="header-anchor" href="#api变更日志" aria-hidden="true">#</a> API变更日志</h2><h3 id="v5-0-2-50299" tabindex="-1"><a class="header-anchor" href="#v5-0-2-50299" aria-hidden="true">#</a> v5.0.2(50299)</h3><ol><li><code>createVirtualClass(normalTable)</code> 增加 <code>__index</code> 方法 <ul><li>作用：使 <code>Manager</code> 可以直接赋值</li></ul></li><li><code>PermissionUtil.smartRequestPermission(permissions)</code> 方法已删除 <ul><li>作用：被 <code>PermissionUtil.askForRequestPermissions(permissionsLists)</code> 代替，更好申请权限</li></ul></li><li>新增 <code>LuaEditorHelper.initKeysTaskFunc(keyWords,jesse205KeyWords)</code></li><li>新增 <code>LuaEditorHelper.initKeys(editor,editorParent,pencilEdit,progressBar)</code></li></ol><h3 id="v5-0-3-50399" tabindex="-1"><a class="header-anchor" href="#v5-0-3-50399" aria-hidden="true">#</a> v5.0.3(50399)</h3><ol><li><code>onCreate(savedInstanceState)</code> 先执行模块的 <code>onCreate</code> ，再执行本身的代码。如果模块的返回 <code>true</code> ，则不执行本身的代码。 <ul><li>作用：支持更多功能（如：新增 <code>keys</code> ，启动时选择性打开文件）</li></ul></li><li><code>PluginsUtil.callElevents(name, ...)</code> 将降低 <code>false</code> 的优先级 <ul><li>作用：使程序逻辑更完善</li></ul></li><li><code>PluginsUtil.loadPlugins()</code> 并不总是校验所有插件的启用状态 <ul><li>作用：提升子页面的打开速度</li></ul></li><li><code>PluginsUtil</code> 升级3.1版本</li><li><code>PluginsUtil.getReallyEnabled(enabled,config)</code> 是否真的已启用</li><li>模块 <code>init.lua</code> 移除 <code>minemastercode</code> 、<code>targetmastercode</code> 、<code>supported</code> ，详情请见 Wiki</li><li>模块 <code>init.lua</code> 新增 <code>icon-night</code> ，自适应夜间模式图标</li></ol><h3 id="v5-1-0-51099-原v5-0-4" tabindex="-1"><a class="header-anchor" href="#v5-1-0-51099-原v5-0-4" aria-hidden="true">#</a> v5.1.0(51099) (原v5.0.4)</h3><details class="custom-container details"><summary>API 名称变更</summary><p>SharedData：</p><table><thead><tr><th>原名称</th><th>新名称</th><th>说明</th></tr></thead><tbody><tr><td>Jesse205Lib_Highlight</td><td>jesse205Lib_support</td><td>更全面设置 Jesse205 库</td></tr><tr><td>AndroidX_Highlight</td><td>androidX_support</td><td>更全面设置 AndroidX 库</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>Jesse205 库：</p><table><thead><tr><th>原名称</th><th>新名称</th><th>说明</th></tr></thead><tbody><tr><td>Jesse205</td><td>jesse205</td><td>Jesse205库基本上所有的语句</td></tr><tr><td>AppPath.AppSdcardCacheDataDir</td><td>AppPath.AppSdcardDataCacheDir</td><td>路径：Android/data/<code>&lt;packagename&gt;</code>/cache</td></tr><tr><td>AppPath.AppShareDir</td><td>AppPath.AppMediaDir</td><td>路径：Android/media/<code>&lt;packagename&gt;</code>/cache</td></tr><tr><td>AppPath.AppShareCacheDir</td><td>AppPath.AppMediaCacheDir</td><td>路径：Android/media/<code>&lt;packagename&gt;</code>/cache</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>其他 API：</p><table><thead><tr><th>原名称</th><th>新名称</th><th>说明</th></tr></thead><tbody><tr><td>RePackTool.getMainProjectName</td><td>RePackTool.getMainModuleName</td><td>那个东西叫模块</td></tr><tr><td>EditorsManager.symbolBar.psButtonClick</td><td>EditorsManager.symbolBar.onButtonClickListener</td><td>符号栏点击</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table></details><details class="custom-container details"><summary>页面标识变更</summary><table><thead><tr><th>原标识</th><th>新标识</th><th>说明</th></tr></thead><tbody><tr><td>/</td><td>newproject</td><td>新建工程页面</td></tr><tr><td>/</td><td>about</td><td>关于页面</td></tr><tr><td>/</td><td>layouthelper</td><td>布局助手页面</td></tr><tr><td>/</td><td>javaapi</td><td>JavaAPI查看器页面</td></tr><tr><td>/</td><td>viewclass</td><td>查看类页面</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table></details><details class="custom-container details"><summary>参数变更</summary><table><thead><tr><th>函数名</th><th>原参数</th><th>新参数</th><th>说明</th></tr></thead><tbody><tr><td>FilesTabManager.closeFile</td><td>(lowerFilePath,<code>blockOpen</code>,changeEditor)</td><td>(lowerFilePath,<code>removeTab</code>,changeEditor)</td><td><strong>removeTab</strong>: 移除文件标签，默认为<code>true</code></td></tr><tr><td>getFilePathCopyMenus</td><td>(inLibDirPath,filePath,fileName,isFile,fileType)</td><td>(inLibDirPath,filePath,<code>fileRelativePath</code>,<br>fileName,isFile,<code>isResDir</code>,fileType)</td><td></td></tr><tr><td>...</td><td>...</td><td></td><td></td></tr></tbody></table></details><details class="custom-container details"><summary>废除的 API</summary><div class="custom-container warning"><p class="custom-container-title">警告</p><p>您必须及时删除这些API，否则您的插件将无法运行</p></div><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>EditorsManager.keyWords</td><td>默认关键词</td></tr><tr><td>EditorsManager.jesse205KeyWords</td><td>Jesse205 库关键词</td></tr><tr><td>EditorsManager.symbolBar.psButtonClick</td><td>符号栏优化</td></tr><tr><td>...</td><td>...</td></tr></tbody></table></details>',10),f={class:"custom-container details"},A=t("summary",null,"新增的 API",-1),v=t("thead",null,[t("tr",null,[t("th",null,"名称"),t("th",null,"说明")])],-1),M=t("tr",null,[t("td",null,"AppPath.AppDataTempDir"),t("td",null,[e("/data/data/"),t("code",null,"<packagename>"),e("/files/temp")])],-1),L=t("tr",null,[t("td",null,"AppPath.AppSdcardDataTempDir"),t("td",null,[e("Android/data/"),t("code",null,"<packagename>"),e("/files/temp")])],-1),k=t("tr",null,[t("td",null,"AppPath.AppMediaTempDir"),t("td",null,[e("Android/media/"),t("code",null,"<packagename>"),e("/files/temp")])],-1),D=t("tr",null,[t("td",null,"editorLayouts.LuaEditor.packagesList"),t("td",null,"待加载的包映射/列表")],-1),E=t("tr",null,[t("td",null,"editorLayouts.LuaEditor.keywordsList"),t("td",null,"待加载的关键词映射/列表")],-1),T=t("tr",null,[t("td",null,"FileTemplates.enName"),t("td",null,"模板英文名")],-1),C=t("tr",null,[t("td",null,"FileTemplates.id"),t("td",null,"模板标识")],-1),B=t("tr",null,[t("td",null,"FilesBrowserManager.providers"),t("td",null,"文件浏览器提供者")],-1),x=t("td",null,"ProjectManager.reopenProject()",-1),S=t("br",null,null,-1),R=t("tr",null,[t("td",null,"formatColor2Hex(color)"),t("td",null,[e("将 number 类型的颜色值转换为字符串的16进制 "),t("br"),e(),t("strong",null,"color"),e(" (number): 颜色值 "),t("br"),e(),t("strong",null,"return"),e(" (string): 颜色值")])],-1),w=t("tr",null,[t("td",null,"getColorAndHex(text)"),t("td",null,[e("获取文字内颜色的数值和16进制 "),t("br"),e(),t("strong",null,"text"),e(" (number): 待分析的文本 "),t("br"),e(),t("strong",null,"return"),e(" (number), (string): 颜色值")])],-1),N=t("tr",null,[t("td",null,"getTableIndexList(mTable)"),t("td",null,[e("获取table的索引列表 "),t("br"),e(),t("strong",null,"mTable"),e(" (table): 随便的 table "),t("br"),e(),t("strong",null,"return"),e(" (table (list)): mTable的索引列表")])],-1),j=t("tr",null,[t("td",null,[e("editorLayouts[EditorName]"),t("br"),e(".onTypefaceChangeListener(ids,config,"),t("br"),e("editor,typeface,boldTypeface,italicTypeface)")]),t("td",null,"当编辑器字体发生改变时")],-1),F=t("tr",null,[t("td",null,"EditorsManager.typefaceChangeListeners"),t("td",null,"编辑器字体改变监听器")],-1),I=t("tr",null,[t("td",null,"EditorsManager.sharedDataChangeListeners"),t("td",null,"SharedData变更监听器")],-1),U=t("tr",null,[t("td",null,"EditorsManager.symbolBar.symbols"),t("td",null,"符号栏里面的符号配置")],-1),H=t("tr",null,[t("td",null,"EditorsManager.refreshTypeface()"),t("td",null,"刷新编辑器字体")],-1),J=t("tr",null,[t("td",null,"EditorsManager.checkAndRefreshTypeface()"),t("td",null,"检查并刷新编辑器字体")],-1),W=t("tr",null,[t("td",null,"EditorsManager.checkAndRefreshSharedDataListeners()"),t("td",null,"检查并刷新SharedData监听器")],-1),V=t("tr",null,[t("td",null,"..."),t("td",null,"...")],-1),O=a("<p>PluginsUtil：</p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>clearOpenedPluginPaths()</td><td>清除已启用的插件路径列表</td></tr><tr><td>...</td><td>...</td></tr></tbody></table><p>类库：</p>",3),K=t("thead",null,[t("tr",null,[t("th",null,"名称"),t("th",null,"说明")])],-1),X=t("td",null,"db",-1),q={href:"https://github.com/limao996/LuaDB",target:"_blank",rel:"noopener noreferrer"},G=t("tr",null,[t("td",null,"..."),t("td",null,"...")],-1),z={class:"custom-container details"},Q=t("summary",null,"新增事件",-1),Y=t("thead",null,[t("tr",null,[t("th",null,"名称"),t("th",null,"说明")])],-1),Z=t("td",null,"onStart()",-1),$=t("td",null,"onStop()",-1),tt=t("td",null,"onKeyShortcut(keyCode, event)",-1),et=t("tr",null,[t("td",null,"..."),t("td",null,"...")],-1),dt=a("<li><code>FilesTabManager.closeFile(lowerFilePath,removeTab,changeEditor)</code> 第二个变量由原来没用的 <code>blockOpen</code> 改为 <code>removeTab</code> ，默认为 <code>true</code></li><li>NoneView 将不在启动时初始化 <ul><li>作用：优化代码</li></ul></li><li>新增 <code>ProjectManager.reopenProject()</code> ，项目可能会在未关闭旧项目的情况下打开新的 <ul><li>作用：刷新 <code>config.lua</code></li></ul></li><li><code>EditorsManager.keyWords</code> 与 <code>EditorsManager.jesse205KeyWords</code> 已废除，已由 <code>editorLayouts.LuaEditor.packagesList</code> 、<code>editorLayouts.LuaEditor.keywordsList</code> 代替 <ul><li>作用：方便插件添加关键字</li></ul></li><li>SharedData 中将 <code>Jesse205Lib_Highlight</code> 与 <code>AndroidX_Highlight</code> 已被 <code>jesse205Lib_support</code> 与 <code>androidX_support</code> 取代 <ul><li>作用：统一变量</li></ul></li><li>页面标识新增 <code>newproject</code> ，<code>about</code> ，<code>layouthelper</code> ，<code>javaapi</code> ，<code>viewclass</code> 页面 <ul><li>作用：更方便地添加内容</li></ul></li><li>Jesse205 库的 <code>Jesse205</code> 改为 <code>jesse205</code> ，哪里报错就看哪里吧 <ul><li>作用：好看</li></ul></li><li><code>main</code> 页面 <code>bottomAppBar</code> 不再固定大小</li><li><code>RePackTool</code> 工具的 <code>getMainProjectName</code> 已更名为 <code>getMainModuleName</code></li><li>修复 <code>main</code> 页面 <code>onResume</code> 的 <code>notFirstOnResume</code>始终为 <code>true</code> 的 bug，并且现在可以返回true阻止程序继续运行</li><li><code>AppPath.AppSdcardCacheDataDir</code> 已更名为 <code>AppPath.AppSdcardDataCacheDir</code>，<code>AppPath.AppShareDir</code>已更名为<code>AppPath.AppMediaDir</code>，<code>AppPath.AppShareCacheDir </code>已更名为 <code>AppPath.AppMediaCacheDir</code> ，新增 <code>AppPath.AppSdcardDataTempDir</code>等路径</li><li><code>main</code> 页面新增 <code>formatColor2Hex(color)</code> 与 <code>getColorAndHex(text)</code></li><li>FileTemplates 新增 <code>enName</code> 与 <code>id</code><ul><li>作用：新增中文，切换语言时保持选项不变</li></ul></li><li><code>getFilePathCopyMenus()</code> 的参数改为 <code>(inLibDirPath,filePath,fileRelativePath,fileName,isFile,isResDir,fileType)</code>，新增了 <code>fileRelativePath</code> 与 <code>isResDir</code><ul><li>作用：能获取到更多的复制菜单</li></ul></li><li>新增文件浏览器提供者，<code>FilesBrowserManager.providers</code><ul><li>作用：更自由添加文件菜单</li></ul></li>",15),lt=t("code",null,"db",-1),ot={href:"https://github.com/limao996/LuaDB",target:"_blank",rel:"noopener noreferrer"},at=t("li",null,[e("新增 "),t("code",null,"editorLayouts[EditorName].onTypefaceChangeListener(ids,config,editor,typeface,boldTypeface,italicTypeface)"),t("ul",null,[t("li",null,"作用：提供个性化字体")])],-1),rt=t("code",null,"onStart",-1),it=t("code",null,"onStop",-1),nt=a("<li>新增 <code>PluginsUtil.clearOpenedPluginPaths()</code>，清除已启用的插件路径列表 <ul><li>作用：方便重载插件</li></ul></li><li>新增 <code>getTableIndexList(mTable)</code>，获取table的索引列表</li><li>添加 <code>EditorsManager.typefaceChangeListeners</code></li><li><code>EditorsManager.actions</code> 自动获取编辑器事件，<code>getXxx</code> 会直接返回值，其他事件返回是否支持</li><li>新增 <code>EditorsManagersymbolBar.symbols</code><ul><li>作用：符号栏内容单独提取</li></ul></li><li>废除 <code>EditorsManagersymbolBar.symbols.psButtonClick</code></li><li>新增 <code>EditorsManager.sharedDataChangeListeners</code><ul><li>作用：更方便刷新配置</li></ul></li><li>新增 <code>EditorsManager.refreshTypeface()</code> 、 <code>EditorsManager.checkAndRefreshTypeface()</code> 与 <code>EditorsManager.checkAndRefreshSharedDataListeners()</code></li><li>......</li>",9),st=a('<div class="custom-container danger"><p class="custom-container-title">警告</p><p>此版本由于更改太多，文档不全，请参考 git 的变更信息和软件源码</p></div><h3 id="v5-1-1-51199" tabindex="-1"><a class="header-anchor" href="#v5-1-1-51199" aria-hidden="true">#</a> v5.1.1(51199)</h3><details class="custom-container details"><summary>变更</summary><p>PluginsManagerUtil</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>uninstall</td><td>在成功之后自动执行 <code>PluginsManagerUtil.clearOpenedPluginPaths()</code></td></tr><tr><td>showInstallDialog</td><td>在成功之后自动执行 <code>PluginsManagerUtil.clearOpenedPluginPaths()</code></td></tr><tr><td>installByUri</td><td>见 <code>PluginsManagerUtil.showInstallDialog</code></td></tr></tbody></table><p>NewProjectManager</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>applySingleCheckGroup</td><td>修复未指定默认Chip时虽然有选择但是没有保存数据的bug，并弹出警告</td></tr></tbody></table><p>FilesBrowserManager</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>refresh</td><td>新增 <code>fileName</code> 参数，用于文件高亮显示</td></tr></tbody></table><p>其他</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>createVirtualClass</td><td>返回结果改为 <code>normalTable</code></td></tr><tr><td>NewProjectManager.loadTemplate</td><td>允许 <code>keys</code> 为空值</td></tr><tr><td>MyCardTitleEditLayout.layout</td><td><code>CardView</code> 下面增加了 <code>FrameLayout</code>，并增加了清除按钮</td></tr><tr><td>RePackTool.getSubprojectPathIteratorByList(config,projectPath)</td><td>api 去处 Java字符</td></tr></tbody></table></details><details class="custom-container details"><summary>新增</summary><p>文件：</p><table><thead><tr><th>文件名</th><th>说明</th></tr></thead><tbody><tr><td>SubActivityUtil.lua</td><td>子页面相关</td></tr><tr><td>ClearContentHelper.lua</td><td>清空按钮</td></tr></tbody></table><p>NewProjectManager：</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>getNowModuleDirName(fileRelativePath)</td><td>获取当前模块目录名称，如果当前路径不在模块内，则返回主模块名称</td></tr></tbody></table><p>事件：</p><table><thead><tr><th>事件</th><th>说明</th></tr></thead><tbody><tr><td>onPause</td><td>生命周期：暂停</td></tr></tbody></table><p>其他方法：</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>authorizeHWApplicationPermissions(uri)</td><td>适配华为文件管理</td></tr></tbody></table><p>编辑器：</p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>WebEditor</td><td>其实就是个浏览器</td></tr></tbody></table></details><details class="custom-container details"><summary>废除</summary><p>EditorManager.symbolBar</p><table><thead><tr><th>老方法</th><th>新方法</th></tr></thead><tbody><tr><td>onButtonLongClickListener</td><td>symbolBar.onButtonTouchListener</td></tr></tbody></table><table><thead><tr><th>老支持库</th><th>新支持库</th></tr></thead><tbody><tr><td>sharp</td><td>androidsvg</td></tr></tbody></table></details><h2 id="相关链接" tabindex="-1"><a class="header-anchor" href="#相关链接" aria-hidden="true">#</a> 相关链接</h2>',6),ct={href:"https://gitee.com/Jesse205/AideLua/blob/master/README.md",target:"_blank",rel:"noopener noreferrer"};function ht(ut,pt){const o=i("router-link"),s=i("Badge"),n=i("ExternalLinkIcon"),r=i("RouterLink");return h(),u("div",null,[b,m,t("details",_,[g,t("nav",y,[t("ul",null,[t("li",null,[d(o,{to:"#api变更日志"},{default:l(()=>[e("API变更日志")]),_:1}),t("ul",null,[t("li",null,[d(o,{to:"#v5-0-2-50299"},{default:l(()=>[e("v5.0.2(50299)")]),_:1})]),t("li",null,[d(o,{to:"#v5-0-3-50399"},{default:l(()=>[e("v5.0.3(50399)")]),_:1})]),t("li",null,[d(o,{to:"#v5-1-0-51099-原v5-0-4"},{default:l(()=>[e("v5.1.0(51099) (原v5.0.4)")]),_:1})]),t("li",null,[d(o,{to:"#v5-1-1-51199"},{default:l(()=>[e("v5.1.1(51199)")]),_:1})])])]),t("li",null,[d(o,{to:"#相关链接"},{default:l(()=>[e("相关链接")]),_:1})])])])]),P,t("details",f,[A,t("table",null,[v,t("tbody",null,[M,L,k,D,E,T,C,B,t("tr",null,[x,t("td",null,[e("重新打开项目。 "),S,e(),d(s,{type:"warning",text:"*",vertical:"middle"}),e(" 由于此API，项目可能会在未关闭旧项目的情况下打开新的项目。")])]),R,w,N,j,F,I,U,H,J,W,V])]),O,t("table",null,[K,t("tbody",null,[t("tr",null,[X,t("td",null,[e("LuaDB, "),t("a",q,[e("在 Github 上查看"),d(n)])])]),G])])]),t("details",z,[Q,t("table",null,[Y,t("tbody",null,[t("tr",null,[Z,t("td",null,[d(r,{to:"/plugin/pages/main.html#onstart"},{default:l(()=>[e("了解详情")]),_:1})])]),t("tr",null,[$,t("td",null,[d(r,{to:"/plugin/pages/main.html#onstop"},{default:l(()=>[e("了解详情")]),_:1})])]),t("tr",null,[tt,t("td",null,[d(r,{to:"/plugin/pages/main.html#onkeyshortcut-keycode-event"},{default:l(()=>[e("了解详情")]),_:1})])]),et])])]),t("ol",null,[dt,t("li",null,[e("新增模块 "),lt,e("，"),t("a",ot,[e("在 Github 上查看"),d(n)])]),at,t("li",null,[e("新增 "),rt,e(" 与 "),it,e(" 等事件，"),d(r,{to:"/plugin/pages/main.html#onstart"},{default:l(()=>[e("了解详情")]),_:1})]),nt]),st,t("ul",null,[t("li",null,[t("a",ct,[e("应用更新日志"),d(n)])])])])}const mt=c(p,[["render",ht],["__file","apichanges.html.vue"]]);export{mt as default};
